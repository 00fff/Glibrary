{% extends "base.html" %}

{% block title %}
{% if session.username %}
{{ session.username }}
{% else %}
My Page
{% endif %}
{% endblock title %}

{% block content %}
<link href="{{ url_for('static', filename='user.css') }}" rel="stylesheet" type="text/css">
<br>{{ user.description }}</br>

{% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
            <p>{{ message }}</p>
        {% endfor %}
    {% endif %}
{% endwith %}

<div class="bottom-half">


    
    {% set completed_games = 0 %}
    {% for game in user_owned_games %}
        {{ game.completion }}
        {% if game.completion %}
            {% set completed_games = completed_games + 1 %}
        {% endif %}
    {% endfor %}

<p>Number of completed games: {{ completed_games }}</p>

    <p class="user-name">{{ user.username }} - Number of completed games: {{ completed_games }} / {{ user_owned_games|length }} - <a href="{{ url_for('auth.edit') }}">Edit Page</a></p>
    
    <div class="games-box">

        {% for user_game in user_owned_games %}
        <div class="game">
            <form action="{{ url_for('data.game') }}" method="GET">
                <button type="submit" style="background:transparent; border:none; color:transparent;">
                    <input type="hidden" name="game" value="{{ user_game.game.title }}">
                    <img id='game-image' src="{{ user_game.game.art }}" alt="Game Art" width="70" height="100">
                </button>
            </form>
            <p id="game-title">{{ user_game.game.title }}</p>
        </div>
        {% endfor %}
    </div>
</div>

{% endblock content %}
